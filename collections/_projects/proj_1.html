---
layout: default
title: "Drag Thingy"
name: drag
category: learning
---

<div class="flex w-10/12 flex-col flex-grow">
  <div>
    <h2 class="font-serif text-xl text-reddish-2 py-2">
      im anxious, adjust my heart rate
    </h2>

    <form class="flex text-sm items-center">
      <label class="block">
        <input id="heartRateInput" name="heartRate" type="range" min="1" max="250" step="1" value="247">
        my &#128151; rate is: 
        <output id="heartRateOutput" name="output" for="heartRate">247</output>
      </label>
    </form>
  </div>

    <div id="radial-graph" class="h-4">
      <svg viewBox="-50 -50 200 200">
        <path id="radialGraphPath"
              fill="red"> 
        </path>
       </svg>
    </div>

    <div id="line-graph">
      <svg id="line-graph-svg" viewBox="0 0 1000 1000">
        <path id="linePath"
              stroke="blue"
              stroke-width="2"
              fill="none">
        </path>
       </svg>
    </div>
  <!-- </div> -->

</div>

<script>

// initialize vals
let step = 0;
let path = "M0,247"
updateHeartRate();

// updates the displayed heart rate based off of the range input form for my heart rate.
function updateHeartRate() {
  d3.select("#heartRateInput").on("input", function() {
    var newHeartRate = +this.value;
    step += 2;

    path = line(newHeartRate, step, path);
    // update the outputted value
    document.getElementById("heartRateOutput").value = newHeartRate;

    // update the radius of the circle
    d3.select("#radialGraphPath")
      .attr("d", arc(newHeartRate / 10));

    // update the plot
    d3.select("#linePath")
      .attr("d", path);
  });
}

// to do - have the value of the heart rate be input to radius
// then have the circle explode at a certain point lol

d3.select("#radialGraphPath")
  .attr("d", arc(24));

var x = d3.scaleLinear()
  .domain([0, 250])
  .range([0, 800])


d3.select("#line-graph-svg")
  .append("g")
  .attr("transform", "translate(0, 250)")
  .call(d3.axisBottom(x));

d3.select("#linePath")
  .attr("d", path);


function arc(radius) {
  // var scaled = radius / 10;
  return d3.arc()
    .innerRadius(radius)
    .outerRadius(radius + 5)
    .startAngle(0)
    .endAngle(360);
}

function line(val, step, prevPath) {
  return prevPath + `L${step},${val}`;
}

var svg = d3.select("svg")
  .append("g")
  .attr("transform", "translate(150, 50)")


</script>
