---
layout: default
title: "Drag Thingy"
name: drag
category: learning
---

<div class="flex w-10/12 flex-col flex-grow">
  <div>
    <h2 class="font-serif text-xl text-reddish-2 py-2">
      im anxious, adjust my heart rate
    </h2>

    <form class="flex text-sm items-center">
      <label class="block">
        <input id="heartRateInput" name="heartRate" type="range" min="1" max="250" step="1" value="247">
        my &#128151; rate is: 
        <output id="heartRateOutput" name="output" for="heartRate">247</output>
      </label>
    </form>
  </div>

    <div id="radial-graph" class="h-4">
      <svg viewBox="-50 -50 200 200">
        <path id="radialGraphPath"
              fill="red"> 
        </path>
       </svg>
    </div>

    <div id="line-graph">
      <svg id="line-graph-svg" viewBox="-10 -10 1000 1000">
        <path id="linePath"
              stroke="blue"
              stroke-width="2"
              stroke-miterlimit="1"
              fill="none">
        </path>
       </svg>
    </div>

</div>

<script>

// initialize vals
let step = 30;
let initHeartRate = +document.getElementById("heartRateOutput").value;
let data = [{"step": step, "val": initHeartRate}];

updateHeartRate();

// updates the displayed heart rate based off of the range input form for my heart rate.
function updateHeartRate() {
  d3.select("#heartRateInput").on("input", function() {
    var newHeartRate = +this.value;
    step += 2;
    data.push({"step": step, "val": newHeartRate});
    // update the outputted value
    document.getElementById("heartRateOutput").value = newHeartRate;

    // update the radius of the circle
    d3.select("#radialGraphPath")
      .attr("d", arcGen(newHeartRate / 10));

    // update the plot
    d3.select("#linePath")
      .attr("d", lineGen(data));
  });
}


let xScale = d3.scaleLinear()
  .domain([0, 1000])
  .range([0, 1000])

let xAxisGenerator = d3.axisBottom(xScale).ticks(20)

let xAxis = d3.select("#line-graph-svg")
  .append("g")
  .call(xAxisGenerator)
  .attr("transform", "translate(30, 400)")

let yScale = d3.scaleLinear()
  .domain([0, 250])
  .range([400, 0])

let yAxisGenerator = d3.axisLeft(yScale)
  .ticks(5)

let yAxis = d3.select("#line-graph-svg")
  .append("g")
  .call(yAxisGenerator)
  .attr("transform", "translate(30, 0)")
  
let lineGen = d3.line()
  .x(d => xScale(d['step']))
  .y(d => yScale(d['val']));

let arcGen = d3.arc()
    .innerRadius(r => r)
    .outerRadius(r => r + 5)
    .startAngle(0)
    .endAngle(360);

</script>
